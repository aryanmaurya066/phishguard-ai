{"ast":null,"code":"import React,{useEffect,useState}from'react';import Layout from'./Layout';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function HistoryDashboardPage(){const[logs,setLogs]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{const fetchLogs=async()=>{try{const res=await axios.get('http://localhost:8000/history');// Update if using token or different path\nsetLogs(res.data.logs);}catch(err){console.error('Error fetching logs:',err);}finally{setLoading(false);}};fetchLogs();},[]);return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow-md rounded-xl p-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-indigo-700 mb-4\",children:\"\\uD83D\\uDCCA Dashboard & History\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-4 text-gray-600\",children:\"Recent phishing analysis records:\"}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading history...\"}):logs.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No records found.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full table-auto border border-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-indigo-100 text-indigo-700\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 text-left\",children:\"Timestamp\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 text-left\",children:\"Email Text\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 text-left\",children:\"Sender\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 text-left\",children:\"URL(s)\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 text-left\",children:\"Result\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 text-left\",children:\"Confidence\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:logs.map((log,idx)=>{var _log$result,_log$result$modules$e,_log$result2,_log$result2$modules,_log$result2$modules$,_log$result2$modules$2;return/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2 text-sm text-gray-700\",children:new Date(log.timestamp).toLocaleString()}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2 text-sm\",children:log.email_text||'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2 text-sm\",children:log.sender_email||'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2 text-sm\",children:(log.urls||[]).join(', ')||'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2 text-sm font-medium\",children:((_log$result=log.result)===null||_log$result===void 0?void 0:_log$result.verdict)||'Unknown'}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2 text-sm\",children:(_log$result$modules$e=(_log$result2=log.result)===null||_log$result2===void 0?void 0:(_log$result2$modules=_log$result2.modules)===null||_log$result2$modules===void 0?void 0:(_log$result2$modules$=_log$result2$modules.email_text)===null||_log$result2$modules$===void 0?void 0:(_log$result2$modules$2=_log$result2$modules$.confidence)===null||_log$result2$modules$2===void 0?void 0:_log$result2$modules$2.toFixed(2))!==null&&_log$result$modules$e!==void 0?_log$result$modules$e:'-'})]},idx);})})]})})]})});}","map":{"version":3,"names":["React","useEffect","useState","Layout","axios","jsx","_jsx","jsxs","_jsxs","HistoryDashboardPage","logs","setLogs","loading","setLoading","fetchLogs","res","get","data","err","console","error","children","className","length","map","log","idx","_log$result","_log$result$modules$e","_log$result2","_log$result2$modules","_log$result2$modules$","_log$result2$modules$2","Date","timestamp","toLocaleString","email_text","sender_email","urls","join","result","verdict","modules","confidence","toFixed"],"sources":["D:/phishguard-ai/frontend/src/components/HistoryDashboardPage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport Layout from './Layout';\r\nimport axios from 'axios';\r\n\r\nexport default function HistoryDashboardPage() {\r\n  const [logs, setLogs] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchLogs = async () => {\r\n      try {\r\n        const res = await axios.get('http://localhost:8000/history'); // Update if using token or different path\r\n        setLogs(res.data.logs);\r\n      } catch (err) {\r\n        console.error('Error fetching logs:', err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchLogs();\r\n  }, []);\r\n\r\n  return (\r\n    <Layout>\r\n      <div className=\"bg-white shadow-md rounded-xl p-6\">\r\n        <h1 className=\"text-2xl font-bold text-indigo-700 mb-4\">ðŸ“Š Dashboard & History</h1>\r\n        <p className=\"mb-4 text-gray-600\">Recent phishing analysis records:</p>\r\n\r\n        {loading ? (\r\n          <p>Loading history...</p>\r\n        ) : logs.length === 0 ? (\r\n          <p>No records found.</p>\r\n        ) : (\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"min-w-full table-auto border border-gray-200\">\r\n              <thead className=\"bg-indigo-100 text-indigo-700\">\r\n                <tr>\r\n                  <th className=\"px-4 py-2 text-left\">Timestamp</th>\r\n                  <th className=\"px-4 py-2 text-left\">Email Text</th>\r\n                  <th className=\"px-4 py-2 text-left\">Sender</th>\r\n                  <th className=\"px-4 py-2 text-left\">URL(s)</th>\r\n                  <th className=\"px-4 py-2 text-left\">Result</th>\r\n                  <th className=\"px-4 py-2 text-left\">Confidence</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {logs.map((log, idx) => (\r\n                  <tr key={idx} className=\"border-b\">\r\n                    <td className=\"px-4 py-2 text-sm text-gray-700\">{new Date(log.timestamp).toLocaleString()}</td>\r\n                    <td className=\"px-4 py-2 text-sm\">{log.email_text || '-'}</td>\r\n                    <td className=\"px-4 py-2 text-sm\">{log.sender_email || '-'}</td>\r\n                    <td className=\"px-4 py-2 text-sm\">{(log.urls || []).join(', ') || '-'}</td>\r\n                    <td className=\"px-4 py-2 text-sm font-medium\">{log.result?.verdict || 'Unknown'}</td>\r\n                    <td className=\"px-4 py-2 text-sm\">{log.result?.modules?.email_text?.confidence?.toFixed(2) ?? '-'}</td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </Layout>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}